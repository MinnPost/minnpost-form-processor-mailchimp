!function(){"use strict";function l(e,t,a,s){"undefined"!=typeof wp&&wp.hooks.doAction("minnpostFormProcessorMailchimpAnalyticsEvent",e,t,a,s)}function d(e,t,a){"undefined"!=typeof wp&&(dataLayer={event:"formSubmissionSuccess",type:e,formId:t,action:a},wp.hooks.doAction("minnpostFormProcessorMailchimpDataLayerEvent",dataLayer))}document.addEventListener("DOMContentLoaded",function(){var e;0<(e=document.querySelectorAll(".m-form-minnpost-form-processor-mailchimp")).length&&e.forEach(function(r){let i=r.id,m=r.querySelector("button"),c=r.querySelector(".m-form-message-ajax");c&&m.addEventListener("click",function(e){e.preventDefault(),e.stopImmediatePropagation(),m.disabled=!0;let t=e.target.textContent||e.target.innerText;m.innerHTML="Processing";e=new FormData(r);e.set("ajaxrequest","true"),e.set("subscribe","true");let a="",s="info",n="Signup",o="Newsletter";fetch(params.ajaxurl,{method:"POST",body:e}).then(e=>e.json()).then(e=>{if(!0===e.success){switch(s="info",m.innerHTML="Thanks",e.data.user_status){case"existing":n="Update";break;case"new":case"pending":n="Signup"}""!==e.data.confirm_message&&(a=e.data.confirm_message),l("event",o,n,location.pathname),d(o,i,n)}else s="error",m.disabled=!1,m.innerHTML=t,l("event",o,"Fail",location.pathname),d(o,i,"Fail"),""!==e.data.confirm_message&&(a=e.data.confirm_message);c.innerHTML=a,c.classList.add("m-form-message-"+s),c.classList.remove("m-form-message-ajax-placeholder"),r.classList.add("m-form-minnpost-form-processor-mailchimp-submitted"),r.classList.contains("m-form-fullpage")&&c.scrollIntoView({behavior:"smooth"})}).catch(e=>{c.innerHTML="<p>An error has occured. Please try again.</p>",c.classList.add("m-form-message-error"),c.classList.remove("m-form-message-ajax-placeholder"),r.classList.remove("m-form-minnpost-form-processor-mailchimp-submitted"),m.disabled=!1,m.innerHTML=t,l("event","Newsletter","Fail",location.pathname),d(o,i,"Fail")})})})})}();