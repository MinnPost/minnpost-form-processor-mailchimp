!function(){"use strict";function c(e,t,a,s){"undefined"!=typeof wp&&wp.hooks.doAction("minnpostFormProcessorMailchimpAnalyticsEvent",e,t,a,s)}document.addEventListener("DOMContentLoaded",function(){var e;0<(e=document.querySelectorAll(".m-form-minnpost-form-processor-mailchimp")).length&&e.forEach(function(o){var i=o.querySelector("button"),m=o.querySelector(".m-form-message-ajax");m&&i.addEventListener("click",function(e){e.preventDefault(),e.stopImmediatePropagation(),i.disabled=!0;var t=e.target.textContent||e.target.innerText;i.innerHTML="Processing";var a=new FormData(o);a.set("ajaxrequest","true"),a.set("subscribe","true");var s="",n="info",r="Signup";fetch(params.ajaxurl,{method:"POST",body:a}).then(function(e){return e.json()}).then(function(e){if(!0===e.success){switch(n="info",i.innerHTML="Thanks",e.data.user_status){case"existing":r="Update";break;case"new":case"pending":r="Signup"}""!==e.data.confirm_message&&(s=e.data.confirm_message),c("event","Newsletter",r,location.pathname)}else n="error",i.disabled=!1,i.innerHTML=t,c("event","Newsletter","Fail",location.pathname),""!==e.data.confirm_message&&(s=e.data.confirm_message);m.innerHTML=s,m.classList.add("m-form-message-"+n),m.classList.remove("m-form-message-ajax-placeholder"),o.classList.add("m-form-minnpost-form-processor-mailchimp-submitted"),o.classList.contains("m-form-fullpage")&&m.scrollIntoView({behavior:"smooth"})}).catch(function(e){m.innerHTML="<p>An error has occured. Please try again.</p>",m.classList.add("m-form-message-error"),m.classList.remove("m-form-message-ajax-placeholder"),o.classList.remove("m-form-minnpost-form-processor-mailchimp-submitted"),i.disabled=!1,i.innerHTML=t,c("event","Newsletter","Fail",location.pathname)})})})})}();