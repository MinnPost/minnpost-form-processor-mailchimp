!function(){"use strict";function d(e,t,s,a){"undefined"!=typeof wp&&wp.hooks.doAction("minnpostFormProcessorMailchimpAnalyticsEvent",e,t,s,a)}function p(e,t,s,a){"undefined"!=typeof wp&&wp.hooks.doAction("minnpostFormProcessorMailchimpDataLayerEvent",{event:"ajaxFormSubmission",type:e,formId:t,formClasses:s,action:a})}document.addEventListener("DOMContentLoaded",function(){var e;0<(e=document.querySelectorAll(".m-form-minnpost-form-processor-mailchimp")).length&&e.forEach(function(r){let i=r.id,m=r.className,c=r.querySelector("button"),l=r.querySelector(".m-form-message-ajax");l&&c.addEventListener("click",function(e){e.preventDefault(),e.stopImmediatePropagation(),c.disabled=!0;let t=e.target.textContent||e.target.innerText;c.innerHTML="Processing";e=new FormData(r);e.set("ajaxrequest","true"),e.set("subscribe","true");let s="",a="info",o="Signup",n="Newsletter";fetch(params.ajaxurl,{method:"POST",body:e}).then(e=>e.json()).then(e=>{if(!0===e.success){switch(a="info",c.innerHTML="Thanks",e.data.user_status){case"existing":o="Update";break;case"new":case"pending":o="Signup"}""!==e.data.confirm_message&&(s=e.data.confirm_message),d("event",n,o,location.pathname),p(n,i,m,o)}else a="error",c.disabled=!1,c.innerHTML=t,d("event",n,"Fail",location.pathname),p(n,i,m,"Fail"),""!==e.data.confirm_message&&(s=e.data.confirm_message);l.innerHTML=s,l.classList.add("m-form-message-"+a),l.classList.remove("m-form-message-ajax-placeholder"),r.classList.add("m-form-minnpost-form-processor-mailchimp-submitted"),r.classList.contains("m-form-fullpage")&&l.scrollIntoView({behavior:"smooth"})}).catch(e=>{l.innerHTML="<p>An error has occured. Please try again.</p>",l.classList.add("m-form-message-error"),l.classList.remove("m-form-message-ajax-placeholder"),r.classList.remove("m-form-minnpost-form-processor-mailchimp-submitted"),c.disabled=!1,c.innerHTML=t,d("event","Newsletter","Fail",location.pathname),p(n,i,m,"Fail")})})})})}();